matchers::avgratio(3)       SmokePing       matchers::avgratio(3)



NNAAMMEE
       matchers::avgratio - detect changes in average median
       latency

OOVVEERRVVIIEEWW
       The avgratio matcher establishes a historic average median
       latency over several measurement rounds. It compares this
       average, against a second average latency value again
       build over several rounds of measurment.

DDEESSCCRRIIPPTTIIOONN
       Call the matcher with the following sequence:

        type = matcher
        pattern =  avgratio(historic=>a,current=>b,comparator=>o,percentage=>p)

       historic
           The number of median values to use for building the
           'historic' average.

       current
           The number of median values to use for building the
           'current' average.

       comparator
           Which comparison operator should be used to compare
           current/historic with percentage.

       percentage
           Right hand side of the comparison.

         old <--- historic ---><--- current ---> now

EEXXAAMMPPLLEE
       Take build the average median latency over 10 samples, use
       this to divid the current average latency built over 2
       samples and check if it is bigger than 150%.

        avgratio(historic=>10,current=>2,comparator=>'>',percentage=>150);

        avg(current)/avg(historic) > 150/100

       This means the matcher will activate when the current
       latency average if more than 1.5 times the historic
       latency average established over the last 10 rounds of
       measurement.

CCOOPPYYRRIIGGHHTT
       Copyright (c) 2004 by OETIKER+PARTNER AG. All rights
       reserved.

SSPPOONNSSOORRSSHHIIPP
       The development of this matcher has been sponsored by
       Virtela Communications www.virtela.net.

LLIICCEENNSSEE
       This program is free software; you can redistribute it
       and/or modify it under the terms of the GNU General Public
       License as published by the Free Software Foundation;
       either version 2 of the License, or (at your option) any
       later version.

       This program is distributed in the hope that it will be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
       PURPOSE.  See the GNU General Public License for more
       details.

       You should have received a copy of the GNU General Public
       License along with this program; if not, write to the Free
       Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
       02139, USA.

AAUUTTHHOORR
       Tobias Oetiker <tobi@oetiker.ch>



1.34                        2004-11-17      matchers::avgratio(3)
