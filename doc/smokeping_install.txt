SMOKEPING_INSTALL(7)        SmokePing        SMOKEPING_INSTALL(7)



NNAAMMEE
       smokeping_install - How to install SmokePing

OOVVEERRVVIIEEWW
       This document explains how to setup SmokePing at your
       site.

DDEESSCCRRIIPPTTIIOONN
       PPrreerreeqquuiissiitteess

       SmokePing does not stand alone. It relies on various other
       tools and services being present. Apart from a Unix OS and
       a working Perl installation you need the following things.
       The list contains the names of the tools together with the
       version of the tool which I am using, and a link for down-
       loading the tool.

       RRDtool 1.0.x or 1.2.x
           <http://people.ee.ethz.ch/oetiker/webtools/rrdtool/>

           Just follow the installation instructions. We need
           this package todo all the logging and graphing in
           SmokePing.

       FPing
           <http://www.fping.com/>

           You should grab the newest version, 2.4b2_to-ipv6, as
           it has IPv6 support and actually builds, unlike the
           older ones.

           Note that fping must be installed setuid root. It
           seems that older versions of fping report round trip
           times in 0.1 milliseconds instead of 1 milliseconds as
           advertised ... SmokePing tries to figure this out. It
           tells you when it starts ... let me know it it gets it
           wrong.

       EchoPing  (Optional)
           <http://echoping.sourceforge.net/>

           You need this to run the EchoPing probes

       Curl (Optional)
           <http://curl.haxx.se/>

           You need this for the Curl probe.

       dig (Optional)
           <http://www.isc.org/sw/bind/>

           You need this for the DNS probe.

       SSH (Optional)
           <http://www.openssh.org/>

           You need this for the SSH probe.

       Various Perl modules (Optional)
           You can get these from <http://www.cpan.org/>.

           Socket6 0.11-1
               Optionally installing the Socket6 module for perl
               enables smokeping to check hostnames that only
               resolve to an IPv6 address. If you probe such
               hosts using ie. the FPing6 probe and get warnings
               that those hosts don't resolve to an IP address,
               you need to install it.

           Net::Telnet
               You need this for the TelnetIOSPing probe.

           Net::DNS
               You need this for the AnotherDNS probe.

           Net::LDAP
               You need this for the LDAP probe.

           IO::Socket::SSL
               You need this if you want the LDAP probe to be
               able to use the 'starttls' command.

           Authen::Radius
               You need this for the Radius probe.

       Webserver
           <http://httpd.apache.org/>

           Well I wont get much into this. The important thing
           is, to have a webserver which allows you to run CGI
           scripts. If you are using Apache I strongly recommend
           using the _s_u_e_x_e_c system for running CGI scripts. Often
           it is sufficient to change the _s_u_e_x_e_c binary to setuid
           root and restart Apache.  Using _s_u_e_x_e_c allow to run
           cgi scripts under proper user accounts.

       Perl 5.6.1
           <http://www.perl.com>

           I guess you will get away with older versions of perl.
           I am using 5.6.1 here and it works fine.

       SpeedyCGI
           <http://www.daemoninc.com/SpeedyCGI/>

           SpeedyCGI speeds up CGIs written in perl dramatically
           by making them memory resident and handing new request
           to the script which is already running.  SmokePing has
           been optimized for use with SpeedyCGI. Note that you
           do NOT need mod_speedy, just the plain and simple
           speedy executable, this is the beauty of this tool it
           works without touching your apache ...  Otherwise you
           could as well be using FastCGI or mod_perl. There is a
           bug in speedy with returning error messages to the
           apache error log. You can find a patch in the
           smokeping download area.

       IInnssttaallllaattiioonn

       Once the tools listed above are in place, you can start
       setting up SmokePing itself. Once the SmokePing tools are
       unpacked, they are more of less ready to use. At least to
       the extent, that it is not necessary to iinnssttaallll them.  You
       may want to rename the directory to a name which does not
       contain the version number of SmokePing, or at least make
       a symlink, so that you can use a persistent name when
       referring to SmokePing files.

       In the distribution you find a number of files named
       _*_._d_i_s_t they have to be edited and renamed to _*. Below you
       find a short explanation for each of the files you have to
       edit:

       _b_i_n_/_s_m_o_k_e_p_i_n_g
           Make sure all the required libraries are available and
           the first line of the script points to your copy of
           perl. Adjust the uussee lliibb lines to point to your RRRRDD--
           ttooooll installation and to the SSmmookkeeppiinngg//lliibb directory
           and edit the path of the config file to be in sync
           with reality.

       _h_t_d_o_c_s_/_s_m_o_k_e_p_i_n_g_._c_g_i
           Edit the _s_m_o_k_e_p_i_n_g_._c_g_i analog to the _s_m_o_k_e_p_i_n_g script
           above. Make sure the first line of the script is
           pointing to your freshly installed copy of Speedy CGI.
           Store the script in a directory of your weberver where
           CGIs get executed. You also have to edit the uussee lliibb
           line similar to what you did to _s_m_o_k_e_p_i_n_g

       _e_t_c_/_c_o_n_f_i_g
           Create your SmokePing configuration file. The easiest
           is to copy the _e_t_c_/_c_o_n_f_i_g file and work from there.
           Please refer to smokeping_config for details.

       _e_t_c_/_b_a_s_e_p_a_g_e_._h_t_m_l
           Edit the html template to your likings. Please do not
           remove the link to the SmokePing counter and my name
           from the template.

       _e_t_c_/_s_m_o_k_e_m_a_i_l
           If you are going to use the DDYYNNAAMMIICC IP support, cus-
           tomize the contents of this file.

       Now you are ready to start smokeping:

        ./bin/smokeping

       Once the system works, you may want to put a SmokePing
       startup script into your _/_e_t_c_/_i_n_i_t_._d tree. Check out
       smokeping for further information.

       When you can now also open the smokeping.cgi webpage to
       look at your data.

CCOOPPYYRRIIGGHHTT
       Copyright (c) 2001, 2005 by Tobias Oetiker. All right
       reserved.

LLIICCEENNSSEE
       This program is free software; you can redistribute it
       and/or modify it under the terms of the GNU General Public
       License as published by the Free Software Foundation;
       either version 2 of the License, or (at your option) any
       later version.

       This program is distributed in the hope that it will be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
       PURPOSE.  See the GNU General Public License for more
       details.

       You should have received a copy of the GNU General Public
       License along with this program; if not, write to the Free
       Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
       02139, USA.

AAUUTTHHOORR
       Tobias Oetiker <tobi@oetiker.ch>



2.0.2                       2005-09-20       SMOKEPING_INSTALL(7)
