.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SMOKEPING_INSTALL 7"
.TH SMOKEPING_INSTALL 7 "2007-12-01" "2.3.6" "SmokePing"
.SH "NAME"
smokeping_install \- How to install SmokePing
.SH "OVERVIEW"
.IX Header "OVERVIEW"
This document explains how to setup SmokePing at your site.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
.Sh "Prerequisites"
.IX Subsection "Prerequisites"
SmokePing does not stand alone. It relies on various other tools and
services being present. Apart from a Unix \s-1OS\s0 and a working Perl installation
you need the following things. The list contains the names of the tools
together with the version of the tool which I am using, and a link for
downloading the tool.
.IP "RRDtool 1.2.x" 4
.IX Item "RRDtool 1.2.x"
<http://oss.oetiker.ch/rrdtool/>
.Sp
Just follow the installation instructions. We need this package todo all the
logging and graphing in SmokePing.
.IP "FPing" 4
.IX Item "FPing"
<http://www.fping.com/>
.Sp
The official site seems to be a bit unmaintained. You might want to grab the 
fping source from <http://packages.debian.org/unstable/net/fping> (at the bottom of the page).
.Sp
Note that fping must be installed setuid root. It seems that older versions
of fping report round trip times in 0.1 milliseconds instead of 1 milliseconds
as advertised ... SmokePing tries to figure this out. It tells
you when it starts ... let me know it it gets it wrong.
.IP "EchoPing  (Optional)" 4
.IX Item "EchoPing  (Optional)"
<http://echoping.sourceforge.net/>
.Sp
You need this to run the EchoPing probes
.IP "Curl (Optional)" 4
.IX Item "Curl (Optional)"
<http://curl.haxx.se/>
.Sp
You need this for the Curl probe.
.IP "dig (Optional)" 4
.IX Item "dig (Optional)"
<http://www.isc.org/sw/bind/>
.Sp
You need this for the \s-1DNS\s0 probe.
.IP "\s-1SSH\s0 (Optional)" 4
.IX Item "SSH (Optional)"
<http://www.openssh.org/>
.Sp
You need this for the \s-1SSH\s0 probe.
.IP "Various Perl modules (Most of these are optional)" 4
.IX Item "Various Perl modules (Most of these are optional)"
You can get these from <http://www.cpan.org/>.
.RS 4
.IP "libwww-perl" 4
.IX Item "libwww-perl"
The master/slave functionality introduced a dependency LWP::UserAgent
from the libwww-perl (also known as \s-1LWP\s0) library. Currently the module
is needed even if the master/slave mode is not enabled.
.IP "Socket6 0.11\-1" 4
.IX Item "Socket6 0.11-1"
Optionally installing the Socket6 module for perl enables
smokeping to check hostnames that only resolve to an IPv6
address. If you probe such hosts using ie. the FPing6 probe
and get warnings that those hosts don't resolve to an \s-1IP\s0
address, you need to install it.
.IP "Net::Telnet" 4
.IX Item "Net::Telnet"
You need this for the TelnetIOSPing probe.
.IP "Net::DNS" 4
.IX Item "Net::DNS"
You need this for the AnotherDNS probe.
.IP "Net::LDAP" 4
.IX Item "Net::LDAP"
You need this for the \s-1LDAP\s0 probe.
.IP "IO::Socket::SSL" 4
.IX Item "IO::Socket::SSL"
You need this if you want the \s-1LDAP\s0 probe to be able to use the 'starttls' command.
.IP "Authen::Radius" 4
.IX Item "Authen::Radius"
You need this for the Radius probe.
.RE
.RS 4
.RE
.IP "Webserver" 4
.IX Item "Webserver"
<http://httpd.apache.org/>
.Sp
Well I wont get much into this. The important thing is, to have a webserver
which allows you to run \s-1CGI\s0 scripts. If you are using Apache I strongly
recommend using the \fIsuexec\fR system for running \s-1CGI\s0 scripts. Often it is
sufficient to change the \fIsuexec\fR binary to setuid root and restart Apache.
Using \fIsuexec\fR allow to run cgi scripts under proper user accounts.
.IP "Perl 5.8.8" 4
.IX Item "Perl 5.8.8"
<http://www.perl.com>
.Sp
I guess you will get away with older versions of perl. I am using 5.8.8 here
and it works fine.
.IP "SpeedyCGI" 4
.IX Item "SpeedyCGI"
<http://www.daemoninc.com/SpeedyCGI/>
.Sp
SpeedyCGI speeds up CGIs written in perl dramatically by making them memory
resident and handing new request to the script which is already running.
SmokePing has been optimized for use with SpeedyCGI. Note that you do \s-1NOT\s0
need mod_speedy, just the plain and simple speedy executable, this is the
beauty of this tool it works without touching your apache ...  Otherwise you
could as well be using FastCGI or mod_perl. There is a bug in speedy with
returning error messages to the apache error log. You can find a patch in
the smokeping download area.
.IP "CGI::Carp" 4
.IX Item "CGI::Carp"
<http://http://search.cpan.org/~lds/CGI.pm/>
.Sp
If you are using a version of Perl older than 5.8.1, you should consider
installing a newer version of CGI::Carp (must be at least 1.24, included in
\&\s-1CGI\s0.pm\-2.82). Otherwise any error messages generated by the \s-1CGI\s0 script
will not show up quite as clean as they could in the web server error log.
If you can't or don't want to upgrade CGI::Carp, you can also set
the \f(CW\*(C`changecgiprogramname\*(C'\fR variable in the \f(CW\*(C`General\*(C'\fR section to the
value \f(CW\*(C`no\*(C'\fR.
.Sh "Installation"
.IX Subsection "Installation"
Once the tools listed above are in place, you can start setting up SmokePing
itself. Once the SmokePing tools are unpacked, they are more of less ready
to use. At least to the extent, that it is not necessary to \fBinstall\fR them.
You may want to rename the directory to a name which does not contain the
version number of SmokePing, or at least make a symlink, so that you can use
a persistent name when referring to SmokePing files.
.PP
In the distribution you find a number of files named \fI*.dist\fR they have to
be edited and renamed to \fI*\fR. Below you find a short explanation for each
of the files you have to edit:
.IP "\fIbin/smokeping\fR" 4
.IX Item "bin/smokeping"
Make sure all the required libraries are available and the first line of the
script points to your copy of perl. Adjust the \fBuse lib\fR lines to point to
your \fBRRDtool\fR installation and to the \fBSmokeping/lib\fR directory and edit
the path of the config file to be in sync with reality.
.IP "\fIhtdocs/smokeping.cgi\fR" 4
.IX Item "htdocs/smokeping.cgi"
Edit the \fIsmokeping.cgi\fR analog to the \fIsmokeping\fR script above. Make sure
the first line of the script is pointing to your freshly installed copy of
Speedy \s-1CGI\s0. Store the script in a directory of your weberver where CGIs get
executed. You also have to edit the \fBuse lib\fR line similar to what you did
to \fIsmokeping\fR. 
.IP "\fIhtdocs/cropper/*\fR" 4
.IX Item "htdocs/cropper/*"
To make the interactive graph-zoomer work, you have to place the content of the
cropper directory somewhere on your webserver and adapt the links in \fIbasepage.html\fR
(see below).
.IP "\fIetc/config\fR" 4
.IX Item "etc/config"
Create your SmokePing configuration file. The easiest is to copy the
\&\fIetc/config\fR file and work from there. Please refer to
smokeping_config for details.
.IP "\fIetc/basepage.html\fR" 4
.IX Item "etc/basepage.html"
Edit the html template to your likings. Please do not remove the link to the
SmokePing counter and my name from the template. The content of the template
will be renderd by the smokeping.cgi. This means that all embeded links must
be relative to smokeping.cgi.
.IP "\fIetc/smokemail\fR" 4
.IX Item "etc/smokemail"
If you are going to use the \fB\s-1DYNAMIC\s0\fR \s-1IP\s0 support, customize the contents of this file.
.PP
Now you are ready to start smokeping:
.PP
.Vb 1
\& ./bin/smokeping
.Ve
.PP
Once the system works, you may want to put a SmokePing startup script into
your \fI/etc/init.d\fR tree. Check out smokeping for further information.
.PP
When you can now also open the smokeping.cgi webpage to look at your data.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2001, 2005 by Tobias Oetiker. All right reserved.
.SH "LICENSE"
.IX Header "LICENSE"
This program is free software; you can redistribute it
and/or modify it under the terms of the \s-1GNU\s0 General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.
.PP
This program is distributed in the hope that it will be
useful, but \s-1WITHOUT\s0 \s-1ANY\s0 \s-1WARRANTY\s0; without even the implied
warranty of \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0
\&\s-1PURPOSE\s0.  See the \s-1GNU\s0 General Public License for more
details.
.PP
You should have received a copy of the \s-1GNU\s0 General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 675 Mass Ave, Cambridge, \s-1MA\s0
02139, \s-1USA\s0.
.SH "AUTHOR"
.IX Header "AUTHOR"
Tobias Oetiker <tobi@oetiker.ch>
