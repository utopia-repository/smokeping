SMOKEPING_CONFIG(1)         SmokePing         SMOKEPING_CONFIG(1)



OOOOVVVVEEEERRRRVVVVIIIIEEEEWWWW
       SmokePing takes its configuration from a single central
       configuration file.  Its location must be hardcoded in the
       smokeping script and smokeping.cgi.

       The contents of this manual is generated directly from the
       configuration file parser.

       The Parser for the Configuration file is written using
       David Schweikers ParseConfig module. Read all about it in
       the ISG::ParseConfig manpage.

       The Configuration file has a tree-like structure with sec-
       tion headings at various levels. It also contains variable
       assignements and tables.

RRRREEEEFFFFEEEERRRREEEENNNNCCCCEEEE
       The text below describes the syntax of the SmokePing con-
       figuration file.

       ************ GGGGeeeennnneeeerrrraaaallll ************ _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)

       General configuration values valid for the whole SmokePing
       setup.

       The following variables can be set in this section:

       oooowwwwnnnneeeerrrr _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Name of the person responsible for this smokeping
           installation.

       iiiimmmmggggccccaaaacccchhhheeee _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           A directory which is visible on your webserver where
           SmokePing can cache graphs.

       iiiimmmmgggguuuurrrrllll _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Either an absolute URL to the iiiimmmmggggccccaaaacccchhhheeee directory or
           one relative to the directory where you keep the
           SmokePing cgi.

       ddddaaaattttaaaaddddiiiirrrr _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           The directory where SmokePing can keep its rrd files.

       ppppiiiiddddddddiiiirrrr _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           The directory where SmokePing keeps its pid when
           demonised.

       sssseeeennnnddddmmmmaaaaiiiillll
           Path to your sendmail binary. It will be used for
           sending mails in connection with the support of
           DYNAMIC addresses.

       ssssmmmmooookkkkeeeemmmmaaaaiiiillll _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Path to the mail template for DYNAMIC hosts. This mail
           template must contain keywords of the form <<<<########_k_e_y_-
           _w_o_r_d########>>>>. There is a sample template included with
           SmokePing.

       ccccggggiiiiuuuurrrrllll _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Complete URL path of the SmokePing.cgi



       mmmmaaaaiiiillllhhhhoooosssstttt
           Instead of using sendmail, you can specify the name of
           an smtp server and use perl's Net::SMTP module to send
           mail to DYNAMIC host owners (see below).

       ccccoooonnnnttttaaaacccctttt _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Mail address of the person responsible for this
           smokeping installation.

       ************ DDDDaaaattttaaaabbbbaaaasssseeee ************ _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)

       Describes the properties of the round robin database for
       storing the SmokePing data. Note that it is not possible
       to edit existing RRDs by changeing the entries in the cfg
       file.

       The following variables can be set in this section:

       sssstttteeeepppp _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Duration of the base operation interval of SmokePing
           in seconds.  SmokePing will venture out every sssstttteeeepppp
           seconds to ping your target hosts.

       ppppiiiinnnnggggssss _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           How many pings should be sent to each target. Sug-
           gested: 20 pings.

       This section also contains a table describing the setup of
       the SmokePing database. Below are reasonable defaults.
       Only change them if you know rrdtool and its workings.
       Each row in the table describes one RRA.

        # cons   xff steps rows
        AVERAGE  0.5   1   1008
        AVERAGE  0.5  12   4320
            MIN  0.5  12   4320
            MAX  0.5  12   4320
        AVERAGE  0.5 144    720
            MAX  0.5 144    720
            MIN  0.5 144    720


       column 0
           Consolidation method.

       column 1
           What part of the consolidated intervals must be known
           to warrant a known entry.

       column 2
           How many sssstttteeeeppppssss to consolidate into for each RRA entry.

       column 3
           How many rrrroooowwwwssss this RRA should have.

       ************ PPPPrrrreeeesssseeeennnnttttaaaattttiiiioooonnnn ************ _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)

       Defines how the SmokePing data should be presented.

       The following variables can be set in this section:

       tttteeeemmmmppppllllaaaatttteeee _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           The webpage template must contain keywords of the form
           <<<<########_k_e_y_w_o_r_d########>>>>. There is a sample template included
           with SmokePing; use it as the basis for your
           experiments. Default template contains a pointer to
           the SmokePing counter and homepage. I would be glad if
           you would not remove this as it gives me an indication
           as to how widely used the tool is.

       cccchhhhaaaarrrrsssseeeetttt
           By default, SmokePing assumes the 'iso-8859-15' char-
           acter set. If you use something else, this is the
           place to speak up.

       The following sections are valid on level 1:

       ++++oooovvvveeeerrrrvvvviiiieeeewwww _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)
           The Overview section defines how the Overview graphs
           should look.

           The following variables can be set in this section:

           wwwwiiiiddddtttthhhh _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
               Width of the Overview Graphs.

           hhhheeeeiiiigggghhhhtttt _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
               Height of the Overview Graphs.

           rrrraaaannnnggggeeee
               How much time should be depicted in the Overview
               graph. Time must be specified as a number followed
               by a letter which specifies the unit of time.
               Known units are: sssseconds, mmmminutes, hhhhours, dddddays,
               wwwweeks, yyyyears.

           mmmmaaaaxxxx____rrrrtttttttt
               Any roundtrip time larger than this value will
               cropped in the overview graph

           mmmmeeeeddddiiiiaaaannnn____ccccoooolllloooorrrr
               By default the median line is drawn in red. Over-
               ride it here with a hex color in the format
               _r_r_g_g_b_b.

           ssssttttrrrrffffttttiiiimmmmeeee
               Use posix strftime to format the timestamp in the
               left hand lower corner of the overview graph

       ++++ddddeeeettttaaaaiiiillll _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)
           The following variables can be set in this section:

           wwwwiiiiddddtttthhhh _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
               How many pixels wide should detail graphs be

           hhhheeeeiiiigggghhhhtttt _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
               How many pixels high should detail graphs be

           llllooooggggaaaarrrriiiitttthhhhmmmmiiiicccc
               should the graphs be shown in a logarithmic scale
               (yes/no)

           uuuunnnniiiissssoooonnnn____ttttoooolllleeeerrrraaaannnncccceeee
               if a graph is more than this factor of the median
               'max' it drops out of the unison scaling algo-
               rithm. A factor of two would mean that any graph
               with a max either less than half or more than
               twice the median 'max' will be dropped from unison
               scaling



           mmmmaaaaxxxx____rrrrtttttttt
               Any roundtrip time larger than this value will
               cropped in the detail graph

           ssssttttrrrrffffttttiiiimmmmeeee
               Use posix strftime to format the timestamp in the
               left hand lower corner of the detail graph

           The detailed display can contain several graphs of
           different resolution. In this table you can specify
           the resolution of each graph.

           Example:

            "Last 3 Hours"    3h
            "Last 30 Hours"   30h
            "Last 10 Days"    10d
            "Last 400 Days"   400d


           column 0
               Description of the particular resolution.

           column 1
               How much time should be depicted. The format is
               the same as for the aaaaggggeeee  parameter of the Overview
               section.

           The following sections are valid on level 2:

           ++++++++lllloooossssssss____ccccoooolllloooorrrrssss
               In the Detail view, the color of the median line
               depends the amount of lost packets. SmokePing
               comes with a reasonable default setting, but you
               may choose to disagree. The table below lets you
               specify your own coloring.

               Example:

                Loss Color   Legend
                1    00ff00    "<1"
                3    0000ff    "<3"
                1000 ff0000    ">=3"


               column 0
                   Activate when the lossrate is larger of equal
                   to this number

               column 1
                   Color for this range.

               column 2
                   Description for this range.

           ++++++++uuuuppppttttiiiimmmmeeee____ccccoooolllloooorrrrssss
               When monitoring a host with DYNAMIC addressing,
               SmokePing will keep track of how long the machine
               is able to keep the same IP address. This time is
               plotted as a color in the graphs background.
               SmokePing comes with a reasonable default setting,
               but you may choose to disagree. The table below
               lets you specify your own coloring

               Example:

                Uptime Color     Legend
                3600    00ff00   "<1h"
                86400   0000ff   "<1d"
                604800  ff0000   "<1w"
                1000000000000 ffff00   ">1w"

               Uptime is in days!

               column 0
                   Activate when uptime in days is larger of
                   equal to this number

               column 1
                   Color for this uptime range range.

               column 2
                   Description for this range.

       ************ PPPPrrrroooobbbbeeeessss ************ _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)

       The Probes Section configures Probe modules. Probe modules
       integrate an external ping command into SmokePing. Check
       the documentation of the Ping module for configuration
       details.

       The following sections are valid on level 1:

       ++++////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
           Each module can take specific configuration informa-
           tion from this area. The jumble of letters above is a
           regular expression defining legal module names.

           The following variables can be set in this section:

           ////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
               Each module defines which variables it wants to
               accept. So this expression here just defines legal
               variable names.

       ************ TTTTaaaarrrrggggeeeettttssss ************ _(_m_a_n_d_a_t_o_r_y _s_e_c_t_i_o_n_)

       The Target Section defines the actual work of SmokePing.
       It contains a hierarchical list of hosts which mark the
       endpoints of the network connections the system should
       monitor.  Each section can contain one host as well as
       other sections.

       The following variables can be set in this section:

       pppprrrroooobbbbeeee _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           The name of the probe module to be used for this host.
           The value of this variable gets propagated

       mmmmeeeennnnuuuu _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Menu entry for this section

       ttttiiiittttlllleeee _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           Title of the page when it is displayed.

       rrrreeeemmmmaaaarrrrkkkk
           An optional remark on the current section. It gets
           displayed on the webpage.

       The following sections are valid on level 1:


       ++++PPPPRRRROOOOBBBBEEEE____CCCCOOOONNNNFFFF
           Probe specific variables.

           The following variables can be set in this section:

           ////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
               Should be found in the documentation of the corre-
               sponding probe. The values get propagated. If a
               child node uses the same Probe as the parent.

       ++++////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
           Each target section can contain information about a
           host to monitor as well as further target sections.
           Most variables have already been described above. The
           expression above defines legal names for target sec-
           tions.

           The following variables can be set in this section:

           pppprrrroooobbbbeeee
           mmmmeeeennnnuuuu _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           ttttiiiittttlllleeee _(_m_a_n_d_a_t_o_r_y _s_e_t_t_i_n_g_)
           nnnnooootttteeee
               Some information about this entry which does NOT
               get displayed on the web.

           eeeemmmmaaaaiiiillll
               This is the contact address for the owner of the
               current host. In connection with the DDDDYYYYNNNNAAAAMMMMIIIICCCC
               hosts, the address will be used for sending the
               belowmentioned script.

           hhhhoooosssstttt
               Can either contain the name of a target host or
               the string DDDDYYYYNNNNAAAAMMMMIIIICCCC.

               In the second case, the target machine has a
               dynamic IP address and thus is required to regu-
               larly contact the SmokePing server to verify its
               IP address.  When starting SmokePing with the com-
               mandline argument --------eeeemmmmaaaaiiiillll it will add a secret
               password to each of the DDDDYYYYNNNNAAAAMMMMIIIICCCC host lines and
               send a script to the owner of each host. This
               script must be started regularly on the host in
               question to make sure SmokePing monitors the right
               box. If the target machine supports SNMP SmokePing
               will also query the hosts sysContact, sysName and
               sysLocation properties to make sure it is still
               the same host.

           rrrreeeemmmmaaaarrrrkkkk

           The following sections are valid on level 2:

           ++++++++PPPPRRRROOOOBBBBEEEE____CCCCOOOONNNNFFFF
               Probe specific variables.

               The following variables can be set in this sec-
               tion:

               ////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
                   Should be found in the documentation of the
                   corresponding probe. The values get propa-
                   gated. If a child node uses the same Probe as
                   the parent.

           ++++++++////[[[[----____0000----9999aaaa----zzzzAAAA----ZZZZ]]]]++++////
               Each target section can contain information about
               a host to monitor as well as further target sec-
               tions. Most variables have already been described
               above. The expression above defines legal names
               for target sections.

CCCCOOOOPPPPYYYYRRRRIIIIGGGGHHHHTTTT
       Copyright (c) 2001 by Tobias Oetiker. All right reserved.

LLLLIIIICCCCEEEENNNNSSSSEEEE
       This program is free software; you can redistribute it
       and/or modify it under the terms of the GNU General Public
       License as published by the Free Software Foundation;
       either version 2 of the License, or (at your option) any
       later version.

       This program is distributed in the hope that it will be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
       PURPOSE.  See the GNU General Public License for more
       details.

       You should have received a copy of the GNU General Public
       License along with this program; if not, write to the Free
       Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
       02139, USA.

AAAAUUUUTTTTHHHHOOOORRRR
       Tobias Oetiker <tobi@oetiker.ch>



2002-03-27                     1.6            SMOKEPING_CONFIG(1)
