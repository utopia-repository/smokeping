.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "probes::CiscoRTTMonEchoICMP 3"
.TH probes::CiscoRTTMonEchoICMP 3 "2005-01-04" "1.35pre1" "SmokePing"
.SH "NAME"
probes::CiscoRTTMonEchoICMP \- Probe for SmokePing
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 3
\& *** Probes ***
\& + CiscoRTTMonEchoICMP
\& + forks=50
.Ve
.PP
.Vb 10
\& *** Targets ***
\& + MyRouter-PingVictim
\& menu = MyRouter->PingVictim
\& title = RTTMon ping from MyRouter to PingVictim
\& host = PingVictim.foobar.com.au
\& ++ PROBE_CONF 
\& ioshost = RTTcommunity@Myrouter.foobar.com.au
\& iosint = 10.33.22.11
\& packetsize = 1024
\& tos = 160
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
A probe for smokeping, which uses the ciscoRttMon \s-1MIB\s0 functionality (\*(L"Service Assurance Agent\*(R", \*(L"\s-1SAA\s0\*(R") of Cisco \s-1IOS\s0 to measure \s-1ICMP\s0 echo (\*(L"ping\*(R") roundtrip times between a Cisco router and any \s-1IP\s0 address. 
.SH "PARAMETERS"
.IX Header "PARAMETERS"
The (mandatory) host parameter specifies the \s-1IP\s0 host, which will be pinged by the router. This can be a \s-1DNS\s0 name, the smokeping host can resolve or a dotted-quad \s-1IP\s0 address.
.PP
The (mandatory) ioshost parameter specifies the Cisco router, which will execute the pings, as well as the \s-1SNMP\s0 community string on the router.
.PP
The (optional) packetsize parameter lets you configure the packetsize for the pings sent. The minimum is 8, the maximum 16392. Use the same number as with fping, if you want the same packet sizes being used on the network. Please note that the packesize must be specified under \s-1PROBE_CONF\s0, all other definitions will be ignored. Default is 56 bytes. 
.PP
The (optional) iosint parameter is the source address for the pings sent. This should be one of the active (!) \s-1IP\s0 addresses of the router to get results. \s-1IOS\s0 looks up the target host address in the forwarding table and then uses the interface(s) listed there to send the ping packets. By default \s-1IOS\s0 uses the (primary) \s-1IP\s0 address on the sending interface as source address for a ping. The RTTMon \s-1MIB\s0 versions before \s-1IOS\s0 12.0(3)T didn't support this parameter.
.PP
The (optional) tos parameter specifies the value of the ToS byte in the \s-1IP\s0 header of the pings. Multiply \s-1DSCP\s0 values times 4 and Precedence values times 32 to calculate the ToS values to configure, e.g. ToS 160 corresponds to a \s-1DSCP\s0 value 40 and a Precedence value of 5. The RTTMon \s-1MIB\s0 versions before \s-1IOS\s0 12.0(3)T didn't support this parameter.
.SH "IOS VERSIONS"
.IX Header "IOS VERSIONS"
It is highly recommended to use this probe with routers running \s-1IOS\s0 12.0(3)T or higher and to test it on less critical routers first. I managed to crash a router with 12.0(9) quite consistently ( in \s-1IOS\s0 lingo 12.0(9) is older code than 12.0(3)T ). I did not observe crashes on higher \s-1IOS\s0 releases, but messages on the router like the one below, when multiple processes concurrently accessed the same router (this case was \s-1IOS\s0 12.1(12b) ):
.PP
Aug 20 07:30:14: \f(CW%RTT\fR\-3\-SemaphoreBadUnlock: \f(CW%RTR:\fR Attempt to unlock semaphore by wrong \s-1RTR\s0 process 70, locked by 78
.PP
Aug 20 07:35:15: \f(CW%RTT\fR\-3\-SemaphoreInUse: \f(CW%RTR:\fR Could not obtain a lock for \s-1RTR\s0. Process 80
.SH "INSTALLATION"
.IX Header "INSTALLATION"
To install this probe copy ciscoRttMonMIB.pm files to ($SMOKEPINGINSTALLDIR)/lib and CiscoRTTMonEchoICMP.pm to ($SMOKEPINGINSTALLDIR)/lib/probes. V0.97 or higher of Simon Leinen's SNMP_Session.pm is required.
.PP
The router(s) must be configured to allow read/write \s-1SNMP\s0 access. Sufficient is:
.PP
.Vb 1
\&        snmp-server community RTTCommunity RW
.Ve
.PP
If you want to be a bit more restrictive with \s-1SNMP\s0 write access to the router, then consider configuring something like this 
.PP
.Vb 3
\&        access-list 2 permit 10.37.3.5
\&        snmp-server view RttMon ciscoRttMonMIB included
\&        snmp-server community RTTCommunity view RttMon RW 2
.Ve
.PP
The above configuration grants \s-1SNMP\s0 read-write only to 10.37.3.5 (the smokeping host) and only to the ciscoRttMon \s-1MIB\s0 tree. The probe does not need access to \s-1SNMP\s0 variables outside the RttMon tree.
.SH "BUGS"
.IX Header "BUGS"
The probe sends unnecessary pings, i.e. more than configured in the \*(L"pings\*(R" variable, because the RTTMon \s-1MIB\s0 only allows to set a total time for all pings in one measurement run (one \*(L"life\*(R"). Currently the probe sets the life duration to \*(L"pings\*(R"*2+3 seconds (2 secs is the ping timeout value hardcoded into this probe). 
.SH "SEE ALSO"
.IX Header "SEE ALSO"
http://people.ee.ethz.ch/~oetiker/webtools/smokeping/
http://www.switch.ch/misc/leinen/snmp/perl/
.PP
The best source for background info on \s-1SAA\s0 is Cisco's documentation on http://www.cisco.com and the CISCO-RTTMON-MIB documentation, which is available at: 
ftp://ftp.cisco.com/pub/mibs/v2/CISCO\-RTTMON\-MIB.my 
.SH "AUTHOR"
.IX Header "AUTHOR"
Joerg.Kummer at Roche.com 
