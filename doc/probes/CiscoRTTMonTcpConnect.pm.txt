probes::CiscoRTTMonTcpConnectS(m3o)kePpirnogbes::CiscoRTTMonTcpConnect(3)



NNAAMMEE
       probes::CiscoRTTMonTcpConnect - Probe for SmokePing

SSYYNNOOPPSSIISS
        *** Probes ***
        + CiscoRTTMonTcpConnect
        + forks=50

        *** Targets ***
        + MyRouter-TCPVictim
        menu = MyRouter->TCPVictim
        title = RTTMon TCP connect from MyRouter to TCPVictim
        host = TCPVictim.foobar.com.au
        probe=CiscoRTTMonTcpConnect
        ++ PROBE_CONF
        ioshost = RTTcommunity@Myrouter.foobar.com.au
        iosint = 10.33.22.11
        tos = 160
        port = 23

DDEESSCCRRIIPPTTIIOONN
       A probe for smokeping, which uses the ciscoRttMon MIB
       functionality ("Service Assurance Agent", "SAA") of Cisco
       IOS to measure TCP connect times between a Cisco router
       and a TCP server. The measured value is the time is the
       time to establish a TCP session, i.e. the time between the
       initial "SYN" TCP packet of the router and the "SYN ACK"
       packet of the host. The router terminates the TCP session
       immediately after the reception of "SYN ACK" with a "FIN"
       packet.

PPAARRAAMMEETTEERRSS
       The (mandatory) host parameter specifies the IP host,
       which the router will connect to. This can be a DNS name,
       the smokeping host can resolve or a dotted-quad IP
       address.

       The (mandatory) ioshost parameter specifies the Cisco
       router, which will establish the TCP connections as well
       as the SNMP community string on the router.

       The (optional) port parameter lets you configure the des-
       tination TCP port on the host. The default is the http
       port 80.

       The (optional) iosint parameter is the source address for
       the TCP connections. This should be one of the active (!)
       IP addresses of the router to get results. IOS looks up
       the target host address in the forwarding table and then
       uses the interface(s) listed there to send the TCP pack-
       ets. By default IOS uses the (primary) IP address on the
       sending interface as source address for a connection.

       The (optional) tos parameter specifies the value of the
       ToS byte in the IP header of the packets from the router.
       Multiply DSCP values times 4 and Precedence values times
       32 to calculate the ToS values to configure, e.g. ToS 160
       corresponds to a DSCP value 40 and a Precedence value of
       5. Please note that this will not influence the ToS value
       in the packets sent by the the host.

IIOOSS VVEERRSSIIOONNSS
       This probe only works with Cisco IOS 12.0(3)T or higher.
       It is recommended to test it on less critical routers
       first.

IINNSSTTAALLLLAATTIIOONN
       To install this probe copy ciscoRttMonMIB.pm to
       ($SMOKEPINGINSTALLDIR)/lib and CiscoRTTMonTcpConnect.pm to
       ($SMOKEPINGINSTALLDIR)/lib/probes. V0.97 or higher of
       Simon Leinen's SNMP_Session.pm is required.

       The router(s) must be configured to allow read/write SNMP
       access. Sufficient is:

               snmp-server community RTTCommunity RW

       If you want to be a bit more restrictive with SNMP write
       access to the router, then consider configuring something
       like this

               access-list 2 permit 10.37.3.5
               snmp-server view RttMon ciscoRttMonMIB included
               snmp-server community RTTCommunity view RttMon RW 2

       The above configuration grants SNMP read-write only to
       10.37.3.5 (the smokeping host) and only to the ciscoRttMon
       MIB tree. The probe does not need access to SNMP variables
       outside the RttMon tree.

BBUUGGSS
       The probe establishes unnecessary connections, i.e. more
       than configured in the "pings" variable, because the
       RTTMon MIB only allows to set a total time for all connec-
       tions in one measurement run (one "life"). Currently the
       probe sets the life duration to "pings"*2+3 seconds (2
       secs is the timeout value hardcoded into this probe).

SSEEEE AALLSSOO
       http://people.ee.ethz.ch/~oetiker/webtools/smokeping/
       http://www.switch.ch/misc/leinen/snmp/perl/

       The best source for background info on SAA is Cisco's doc-
       umentation on http://www.cisco.com and the CISCO-RTTMON-
       MIB documentation, which is available at:
       ftp://ftp.cisco.com/pub/mibs/v2/CISCO-RTTMON-MIB.my

AAUUTTHHOORR
       Joerg.Kummer at Roche.com



1.35pre1                    2005-0p1r-o0b4es::CiscoRTTMonTcpConnect(3)
