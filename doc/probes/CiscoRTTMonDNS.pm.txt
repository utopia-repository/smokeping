probes::CiscoRTTMonDNS(3)   SmokePing   probes::CiscoRTTMonDNS(3)



NNAAMMEE
       probes::CiscoRTTMonDNS.pm - Probe for SmokePing

SSYYNNOOPPSSIISS
        *** Probes ***
        + CiscoRTTMonDNS
        + forks=50

        *** Targets ***
        + MyRouter-DNSserver
        menu = MyRouter->DNSserver
        title = RTTMon DNS lookup of www.foobar.com.au on DNSserver
        host = DNSserver.foobar.com.au
        probe=CiscoRTTMonDNS
        ++ PROBE_CONF
        ioshost = RTTcommunity@Myrouter.foobar.com.au
        name=www.foobar.com.au
        iosint = 10.33.22.11

DDEESSCCRRIIPPTTIIOONN
       A probe for smokeping, which uses the ciscoRttMon MIB
       functionality ("Service Assurance Agent", "SAA") of Cisco
       IOS to time ( recursive, type A) DNS queries to a DNS
       server.

PPAARRAAMMEETTEERRSS
       The (mandatory) host parameter specifies the DNS server,
       which the router will use. This can be a DNS name, the
       smokeping host can resolve or a dotted-quad IP address.

       The (mandatory) ioshost parameter specifies the Cisco
       router, which will send the DNS requests, as well as the
       SNMP community string on the router.

       The (mandatory) name parameter is the DNS name to resolve.

       The (optional) iosint parameter is the source address for
       the DNS packets. This should be one of the active (!) IP
       addresses of the router to get results. IOS looks up the
       target host address in the forwarding table and then uses
       the interface(s) listed there to send the DNS packets. By
       default IOS uses the (primary) IP address on the sending
       interface as source address for packets originated by the
       router.

IIOOSS VVEERRSSIIOONNSS
       This probe only works with IOS 12.0(3)T or higher.  It is
       recommended to test it on less critical routers first.

IINNSSTTAALLLLAATTIIOONN
       To install this probe copy ciscoRttMonMIB.pm to
       ($SMOKEPINGINSTALLDIR)/lib and CiscoRTTMonDNS.pm to
       ($SMOKEPINGINSTALLDIR)/lib/probes.

       The router(s) must be configured to allow read/write SNMP
       access. Sufficient is:

               snmp-server community RTTCommunity RW

       If you want to be a bit more restrictive with SNMP write
       access to the router, then consider configuring something
       like this

               access-list 2 permit 10.37.3.5
               snmp-server view RttMon ciscoRttMonMIB included
               snmp-server community RTTCommunity view RttMon RW 2

       The above configuration grants SNMP read-write only to
       10.37.3.5 (the smokeping host) and only to the ciscoRttMon
       MIB tree. The probe does not need access to SNMP variables
       outside the RttMon tree.

BBUUGGSS
       The probe does unnecessary DNS queries, i.e. more than
       configured in the "pings" variable, because the RTTMon MIB
       only allows to set a total time for all queries in one
       measurement run (one "life"). Currently the probe sets the
       life duration to "pings"*2+3 seconds (2 secs is the time-
       out value hardcoded into this probe).

SSEEEE AALLSSOO
       http://people.ee.ethz.ch/~oetiker/webtools/smokeping/
       http://www.switch.ch/misc/leinen/snmp/perl/

       The best source for background info on SAA is Cisco's doc-
       umentation on http://www.cisco.com and the CISCO-RTTMON-
       MIB documentation, which is available at:
       ftp://ftp.cisco.com/pub/mibs/v2/CISCO-RTTMON-MIB.my

AAUUTTHHOORR
       Joerg.Kummer at Roche.com



1.35pre1                    2005-01-04  probes::CiscoRTTMonDNS(3)
