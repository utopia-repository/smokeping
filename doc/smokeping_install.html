<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>smokeping_install</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#overview">OVERVIEW</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#prerequisites">Prerequisites</a></li>
		<li><a href="#installation">Installation</a></li>
	</ul>

	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#license">LICENSE</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
-->
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>smokeping_install - How to install SmokePing</p>
<p>
</p>
<hr />
<h1><a name="overview">OVERVIEW</a></h1>
<p>This document explains how to setup SmokePing at your site.</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>
</p>
<h2><a name="prerequisites">Prerequisites</a></h2>
<p>SmokePing does not stand alone. It relies on various other tools and
services being present. Apart from a Unix OS and a working Perl installation
you need the following things. The list contains the names of the tools
together with the version of the tool which I am using, and a link for
downloading the tool.</p>
<dl>
<dt><strong><a name="item_rrdtool_1_2e2_2ex">RRDtool 1.2.x</a></strong>

<dd>
<p><a href="http://oss.oetiker.ch/rrdtool/">http://oss.oetiker.ch/rrdtool/</a></p>

</dd><dd>
<p>Just follow the installation instructions. We need this package todo all the
logging and graphing in SmokePing.</p>

</li>
</dd><dt><strong><a name="item_fping">FPing</a></strong>

<dd>
<p><a href="http://www.fping.com/">http://www.fping.com/</a></p>

</dd><dd>
<p>The official site seems to be a bit unmaintained. You might want to grab the 
fping source from <a href="http://packages.debian.org/unstable/net/fping">http://packages.debian.org/unstable/net/fping</a> (at the bottom of the page).</p>

</dd><dd>
<p>Note that fping must be installed setuid root. It seems that older versions
of fping report round trip times in 0.1 milliseconds instead of 1 milliseconds
as advertised ... SmokePing tries to figure this out. It tells
you when it starts ... let me know it it gets it wrong.</p>

</li>
</dd><dt><strong><a name="item_echoping">EchoPing  (Optional)</a></strong>

<dd>
<p><a href="http://echoping.sourceforge.net/">http://echoping.sourceforge.net/</a></p>

</dd><dd>
<p>You need this to run the EchoPing probes</p>

</li>
</dd><dt><strong><a name="item_curl">Curl (Optional)</a></strong>

<dd>
<p><a href="http://curl.haxx.se/">http://curl.haxx.se/</a></p>

</dd><dd>
<p>You need this for the Curl probe.</p>

</li>
</dd><dt><strong><a name="item_dig">dig (Optional)</a></strong>

<dd>
<p><a href="http://www.isc.org/sw/bind/">http://www.isc.org/sw/bind/</a></p>

</dd><dd>
<p>You need this for the DNS probe.</p>

</li>
</dd><dt><strong><a name="item_ssh">SSH (Optional)</a></strong>

<dd>
<p><a href="http://www.openssh.org/">http://www.openssh.org/</a></p>

</dd><dd>
<p>You need this for the SSH probe.</p>

</li>
</dd><dt><strong><a name="item_modules">Various Perl modules (Optional)</a></strong>

<dd>
<p>You can get these from <a href="http://www.cpan.org/">http://www.cpan.org/</a>.</p>

<dl>
<dt><strong><a name="item_socket6_0_2e11_2d1">Socket6 0.11-1</a></strong>

<dd>
<p>Optionally installing the Socket6 module for perl enables
smokeping to check hostnames that only resolve to an IPv6
address. If you probe such hosts using ie. the FPing6 probe
and get warnings that those hosts don't resolve to an IP
address, you need to install it.</p>

</li>
</dd><dt><strong><a name="item_net_3a_3atelnet">Net::Telnet</a></strong>

<dd>
<p>You need this for the TelnetIOSPing probe.</p>

</li>
</dd><dt><strong><a name="item_net_3a_3adns">Net::DNS</a></strong>

<dd>
<p>You need this for the AnotherDNS probe.</p>

</li>
</dd><dt><strong><a name="item_net_3a_3aldap">Net::LDAP</a></strong>

<dd>
<p>You need this for the LDAP probe.</p>

</li>
</dd><dt><strong><a name="item_io_3a_3asocket_3a_3assl">IO::Socket::SSL</a></strong>

<dd>
<p>You need this if you want the LDAP probe to be able to use the 'starttls' command.</p>

</li>
</dd><dt><strong><a name="item_authen_3a_3aradius">Authen::Radius</a></strong>

<dd>
<p>You need this for the Radius probe.</p>

</li>
</dd></dl>
</dd><dt><strong><a name="item_webserver">Webserver</a></strong>

<dd>
<p><a href="http://httpd.apache.org/">http://httpd.apache.org/</a></p>

</dd><dd>
<p>Well I wont get much into this. The important thing is, to have a webserver
which allows you to run CGI scripts. If you are using Apache I strongly
recommend using the <em>suexec</em> system for running CGI scripts. Often it is
sufficient to change the <em>suexec</em> binary to setuid root and restart Apache.
Using <em>suexec</em> allow to run cgi scripts under proper user accounts.</p>

</li>
</dd><dt><strong><a name="item_perl_5_2e8_2e8">Perl 5.8.8</a></strong>

<dd>
<p><a href="http://www.perl.com">http://www.perl.com</a></p>

</dd><dd>
<p>I guess you will get away with older versions of perl. I am using 5.8.8 here
and it works fine.</p>

</li>
</dd><dt><strong><a name="item_speedycgi">SpeedyCGI</a></strong>

<dd>
<p><a href="http://www.daemoninc.com/SpeedyCGI/">http://www.daemoninc.com/SpeedyCGI/</a></p>

</dd><dd>
<p>SpeedyCGI speeds up CGIs written in perl dramatically by making them memory
resident and handing new request to the script which is already running.
SmokePing has been optimized for use with SpeedyCGI. Note that you do NOT
need mod_speedy, just the plain and simple speedy executable, this is the
beauty of this tool it works without touching your apache ...  Otherwise you
could as well be using FastCGI or mod_perl. There is a bug in speedy with
returning error messages to the apache error log. You can find a patch in
the smokeping download area.</p>

</li>
</dd><dt><strong><a name="item_cgi_3a_3acarp">CGI::Carp</a></strong>

<dd>
<p><a href="http://http://search.cpan.org/~lds/CGI.pm/">http://http://search.cpan.org/~lds/CGI.pm/</a></p>

</dd><dd>
<p>If you are using a version of Perl older than 5.8.1, you should consider
installing a newer version of CGI::Carp (must be at least 1.24, included in
CGI.pm-2.82). Otherwise any error messages generated by the CGI script
will not show up quite as clean as they could in the web server error log.
If you can't or don't want to upgrade CGI::Carp, you can also set
the <code>changecgiprogramname</code> variable in the <code>General</code> section to the
value <code>no</code>.</p>

</li>
</dd></dl>
<p>
</p>
<h2><a name="installation">Installation</a></h2>
<p>Once the tools listed above are in place, you can start setting up SmokePing
itself. Once the SmokePing tools are unpacked, they are more of less ready
to use. At least to the extent, that it is not necessary to <strong>install</strong> them.
You may want to rename the directory to a name which does not contain the
version number of SmokePing, or at least make a symlink, so that you can use
a persistent name when referring to SmokePing files.</p>
<p>In the distribution you find a number of files named <em>*.dist</em> they have to
be edited and renamed to <em>*</em>. Below you find a short explanation for each
of the files you have to edit:</p>
<dl>
<dt><strong><a name="item_bin_2fsmokeping"><em>bin/smokeping</em></a></strong>

<dd>
<p>Make sure all the required libraries are available and the first line of the
script points to your copy of perl. Adjust the <strong>use lib</strong> lines to point to
your <strong>RRDtool</strong> installation and to the <strong>Smokeping/lib</strong> directory and edit
the path of the config file to be in sync with reality.</p>

</li>
</dd><dt><strong><a name="item_htdocs_2fsmokeping_2ecgi"><em>htdocs/smokeping.cgi</em></a></strong>

<dd>
<p>Edit the <em>smokeping.cgi</em> analog to the <em>smokeping</em> script above. Make sure
the first line of the script is pointing to your freshly installed copy of
Speedy CGI. Store the script in a directory of your weberver where CGIs get
executed. You also have to edit the <strong>use lib</strong> line similar to what you did
to <em>smokeping</em>.</p>

</li>
</dd><dt><strong><a name="item_htdocs_2fcropper_2f_2a"><em>htdocs/cropper/*</em></a></strong>

<dd>
<p>To make the interactive graph-zoomer work, you have to place the content of the
cropper directory somewhere on your webserver and adapt the links in <em>basepage.html</em>
(see below).</p>

</li>
</dd><dt><strong><a name="item_etc_2fconfig"><em>etc/config</em></a></strong>

<dd>
<p>Create your SmokePing configuration file. The easiest is to copy the
<em>etc/config</em> file and work from there. Please refer to
<a href="././smokeping_config.html">the smokeping_config manpage</a> for details.</p>

</li>
</dd><dt><strong><a name="item_etc_2fbasepage_2ehtml"><em>etc/basepage.html</em></a></strong>

<dd>
<p>Edit the html template to your likings. Please do not remove the link to the
SmokePing counter and my name from the template. The content of the template
will be renderd by the smokeping.cgi. This means that all embeded links must
be relative to smokeping.cgi.</p>

</li>
</dd><dt><strong><a name="item_etc_2fsmokemail"><em>etc/smokemail</em></a></strong>

<dd>
<p>If you are going to use the <strong>DYNAMIC</strong> IP support, customize the contents of this file.</p>

</li>
</dd></dl>
<p>Now you are ready to start smokeping:</p>
<pre>
 ./bin/smokeping</pre>
<p>Once the system works, you may want to put a SmokePing startup script into
your <em>/etc/init.d</em> tree. Check out <a href="././smokeping.html">the smokeping manpage</a> for further information.</p>
<p>When you can now also open the smokeping.cgi webpage to look at your data.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2001, 2005 by Tobias Oetiker. All right reserved.</p>
<p>
</p>
<hr />
<h1><a name="license">LICENSE</a></h1>
<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>
<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the GNU General Public License for more
details.</p>
<p>You should have received a copy of the GNU General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
02139, USA.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Tobias Oetiker &lt;<a href="mailto:tobi@oetiker.ch">tobi@oetiker.ch</a>&gt;</p>

</body>

</html>
