<HTML>
<HEAD>
<TITLE>smokeping_install</TITLE>
<LINK REV="made" HREF="mailto:karrer@iis.ee.ethz.ch">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#overview">OVERVIEW</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<UL>

		<LI><A HREF="#prerequisites">Prerequisites</A></LI>
		<LI><A HREF="#installation">Installation</A></LI>
	</UL>

	<LI><A HREF="#copyright">COPYRIGHT</A></LI>
	<LI><A HREF="#license">LICENSE</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
</UL>
-->
<!-- INDEX END -->

<P>
<H1><A NAME="name">NAME</A></H1>
<P>smokeping_install - How to install SmokePing</P>
<P>
<HR>
<H1><A NAME="overview">OVERVIEW</A></H1>
<P>This document explains how to setup SmokePing at your site.</P>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>
<H2><A NAME="prerequisites">Prerequisites</A></H2>
<P>SmokePing does not stand alone. It relies on various other tools and
services being present. Apart from a Unix OS and a working Perl installation
you need the following things. The list contains the names of the tools
together with the version of the tool which I am using, and a link for
downloading the tool.</P>
<DL>
<DT><STRONG><A NAME="item_RRDtool_1%2E0%2E33">RRDtool 1.0.33</A></STRONG><BR>
<DD>
<A HREF="http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/pub/rrdtool-1.0.33.tar.gz">http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/pub/rrdtool-1.0.33.tar.gz</A>
<P>Just follow the installation instructions. We need this package todo all the
logging and graphing in SmokePing.</P>
<P></P>
<DT><STRONG><A NAME="item_FPing_2%2E4b2">FPing 2.4b2</A></STRONG><BR>
<DD>
<A HREF="http://people.ee.ethz.ch/~oetiker/webtools/smokeping/pub/fping-2.4b2_to.tar.gz">http://people.ee.ethz.ch/~oetiker/webtools/smokeping/pub/fping-2.4b2_to.tar.gz</A>
<P>This is a special version of fping which actually builds. I have not
modified the code in any way, I just fixed the autoconf setup. The original
can be found on <A HREF="http://www.fping.com/download/fping-2.4b2.tar.gz">http://www.fping.com/download/fping-2.4b2.tar.gz</A></P>
<P>Note that fping must be installed setuid root. It seems that older versions
of fping report round trip times in 0.1 milliseconds instead of 1 milliseconds
as advertised ... SmokePing tries to figure this out. It tells
you when it starts ... let me know it it gets it wrong.</P>
<P></P>
<DT><STRONG><A NAME="item_Webserver">Webserver</A></STRONG><BR>
<DD>
<A HREF="http://httpd.apache.org/">http://httpd.apache.org/</A>
<P>Well I wont get much into this. The important thing is, to have a webserver
which allows you to run CGI scripts. If you are using Apache I strongly
recommend using the <EM>suexec</EM> system for running CGI scripts. Often it is
sufficient to change the <EM>suexec</EM> binary to setuid root and restart Apache.
Using <EM>suexec</EM> allow to run cgi scripts under proper user accounts.</P>
<P></P>
<DT><STRONG><A NAME="item_Perl_5%2E6%2E1">Perl 5.6.1</A></STRONG><BR>
<DD>
<A HREF="http://www.perl.com">http://www.perl.com</A>
<P>I guess you will get away with older versions of perl. I am using 5.6.1 here
and it works fine.</P>
<P></P>
<DT><STRONG><A NAME="item_SpeedyCGI">SpeedyCGI</A></STRONG><BR>
<DD>
<A HREF="http://daemoninc.com/speedycgi/">http://daemoninc.com/speedycgi/</A>
<P>SpeedyCGI speeds up CGIs written in perl dramatically by making them memory
resident and handing new request to the script which is already running.
SmokePing has been optimized for use with SpeedyCGI. Note that you do NOT
need mod_speedy, just the plain and simple speedy executable, this is the
beauty of this tool it works without touching your apache ...  Otherwise
you could as well be using FastCGI or mod_perl.</P>
<P></P></DL>
<P>
<H2><A NAME="installation">Installation</A></H2>
<P>Once the tools listed above are in place, you can start setting up SmokePing
itself. Once the SmokePing tools are unpacked, they are more of less ready
to use. At least to the extent, that it is not necessary to <STRONG>install</STRONG> them.
You may want to rename the directory to a name which does not contain the
version number of SmokePing, or at least make a symlink, so that you can use
a persistent name when referring to SmokePing files.</P>
<P>In the distribution you find a number of files named <EM>*.dist</EM> they have to
be edited and renamed to <EM>*</EM>. Below you find a short explanation for each
of the files you have to edit:</P>
<DL>
<DT><STRONG><A NAME="item_bin%2Fsmokeping"><EM>bin/smokeping</EM></A></STRONG><BR>
<DD>
Make sure all the required libraries are available and the first line of the
script points to your copy of perl. Adjust the <STRONG>use lib</STRONG> lines to point to
your <STRONG>RRDtool</STRONG> installation and to the <STRONG>Smokeping/lib</STRONG> directory and edit
the path of the config file to be in sync with reality.
<P></P>
<DT><STRONG><A NAME="item_htdocs%2Fsmokeping%2Ecgi"><EM>htdocs/smokeping.cgi</EM></A></STRONG><BR>
<DD>
Edit the <EM>smokeping.cgi</EM> analog to the <EM>smokeping</EM> script above. Make sure
the first line of the script is pointing to your freshly installed copy of
Speedy CGI. Store the script in a directory of your weberver where CGIs get
executed. You also have to edit the <STRONG>use lib</STRONG> line similar to what you did
to <EM>smokeping</EM>
<P></P>
<DT><STRONG><A NAME="item_etc%2Fconfig"><EM>etc/config</EM></A></STRONG><BR>
<DD>
Create your SmokePing configuration file. The easiest is to copy the
<EM>etc/config</EM> file and work from there. Please refer to
<A HREF="././smokeping_config.html">the smokeping_config manpage</A> for details.
<P></P>
<DT><STRONG><A NAME="item_etc%2Fbasepage%2Ehtml"><EM>etc/basepage.html</EM></A></STRONG><BR>
<DD>
Edit the html template to your likings. Please do not remove the link to the
SmokePing counter and my name from the template.
<P></P>
<DT><STRONG><A NAME="item_etc%2Fsmokemail"><EM>etc/smokemail</EM></A></STRONG><BR>
<DD>
If you are going to use the <STRONG>DYNAMIC</STRONG> IP support, customize the contents of this file.
<P></P></DL>
<P>Now you are ready to start smokeping:</P>
<PRE>
 ./bin/smokeping</PRE>
<P>Once the system works, you may want to put a SmokePing startup script into
your <EM>/etc/init.d</EM> tree. Check out <A HREF="././smokeping.html">the smokeping manpage</A> for further information.</P>
<P>When you can now also open the smokeping.cgi webpage to look at your data.</P>
<P>
<HR>
<H1><A NAME="copyright">COPYRIGHT</A></H1>
<P>Copyright (c) 2001 by Tobias Oetiker. All right reserved.</P>
<P>
<HR>
<H1><A NAME="license">LICENSE</A></H1>
<P>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</P>
<P>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the GNU General Public License for more
details.</P>
<P>You should have received a copy of the GNU General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
02139, USA.</P>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Tobias Oetiker &lt;<A HREF="mailto:tobi@oetiker.ch">tobi@oetiker.ch</A>&gt;</P>

</BODY>

</HTML>
